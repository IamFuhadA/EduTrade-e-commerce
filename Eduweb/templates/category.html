<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>EduTrade - Category</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Space+Grotesk&display=swap" rel="stylesheet">

    <!-- Bootstrap and Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{% static 'web/lib/animate/animate.min.css' %}" rel="stylesheet">
    <link href="{% static 'web/lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">

    <!-- Bootstrap & Custom CSS -->
    <link href="{% static 'web/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'web/css/style.css' %}" rel="stylesheet">

    <style>
        .book-card img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 8px;
        }
        .book-card {
            transition: 0.3s ease;
        }
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <div class="container-fluid sticky-top">
        <div class="container">
            <nav class="navbar navbar-expand-lg navbar-light border-bottom border-2 border-white">
                <a href="{% url 'home' %}" class="navbar-brand">
                    <h1>EduTrade</h1>
                </a>
                <button type="button" class="navbar-toggler ms-auto me-0" data-bs-toggle="collapse"
                    data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto">
                        <a href="{% url 'home' %}" class="nav-item nav-link ">Home</a>
                        <a href="{% url 'about' %}" class="nav-item nav-link">About</a>
                        <div class="nav-item dropdown">
                            <a href="#!" class="nav-link dropdown-toggle active" data-bs-toggle="dropdown">Categories</a>
                            <div class="dropdown-menu bg-light mt-2">
                                {% if category %}
                                    {% for i in category %}
                                        <a href="{% url 'category' i.name %}" class="dropdown-item">{{ i.name }}</a>
                                    {% endfor %}
                                {% else %}
                                    <span class="dropdown-item text-muted">No Records</span>
                                {% endif %}
                            </div>
                        </div>
                        <a href="{% url 'popular' %}" class="nav-item nav-link ">Popular</a>
                        <a href="{% url 'contact' %}" class="nav-item nav-link">Contact</a>
                        <div class="nav-item dropdown">
                            {% if request.session.username %}
                                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="bi bi-person-circle me-1"></i> Welcome {{ request.session.username }}
                                </a>
                                <div class="dropdown-menu dropdown-menu-end bg-light mt-2">
                                    <a href="{% url 'signin_out' %}" class="dropdown-item">Sign out</a>
                                </div>
                            {% else %}
                                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="bi bi-person-circle me-1"></i> Account
                                </a>
                                <div class="dropdown-menu dropdown-menu-end bg-light mt-2">
                                    <a href="{% url 'signin' %}" class="dropdown-item">Sign in</a>
                                    <a href="{% url 'signup' %}" class="dropdown-item">Sign up</a>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </div>
    <!-- Hero -->
    <div class="container-fluid pb-5 bg-primary hero-header text-white">
        <div class="container py-5 text-center">
            <h1 class="display-4 mb-3">{{ selected_category }}</h1>
            <p class="lead mb-0 " style="color:grey;">Browse books and accessories in this category</p>
        </div>
    </div>

    {% if books %}
      <!-- Books Section (Shown when there are books) -->
      <div class="container-xxl py-5">
        <div class="container">
          <div class="text-center mx-auto mb-5" style="max-width: 600px;">
            <h2 class="section-title">Books</h2>
          </div>
          <div class="row g-4">
            {% for book in books %}
            <div class="col-lg-3 col-md-4 col-sm-6">
              <div class="book-card bg-light p-3 rounded h-100">
                <a href="{% url 'book_details' book.id %}">
                  {% if book.cover_image %}
                    <img src="{{ book.cover_image.url }}" alt="{{ book.title }}">
                  {% else %}
                    <img src="{% static 'web/img/newsletter.jpg' %}" alt="{{ book.title }}">
                  {% endif %}
                </a>
                <div class="mt-3">
                  <h5 class="mb-1"><a class="text-dark text-decoration-none" href="{% url 'book_details' book.id %}">{{ book.title }}</a></h5>
                  <p class="text-muted mb-1">{{ book.author }}</p>
                  {% if book.price %}
                    <p class="fw-bold text-primary">₹{{ book.price }}</p>
                  {% endif %}
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    {% elif accessories %}
      <!-- Accessories Section (Shown when there are no books but there are accessories) -->
      <div class="container-xxl py-5">
        <div class="container">
          <div class="text-center mx-auto mb-5" style="max-width: 600px;">
            <h2 class="section-title">Accessories</h2>
          </div>
          <div class="row g-4">
            {% for item in accessories %}
            <div class="col-lg-3 col-md-4 col-sm-6">
              <div class="book-card bg-light p-3 rounded h-100">
                <a href="{% url 'accessory_details' item.id %}">
                  {% if item.image %}
                    <img src="{{ item.image.url }}" alt="{{ item.name }}">
                  {% else %}
                    <img src="{% static 'web/img/newsletter.jpg' %}" alt="{{ item.name }}">
                  {% endif %}
                </a>
                <div class="mt-3">
                  <h5 class="mb-1"><a class="text-dark text-decoration-none" href="{% url 'accessory_details' item.id %}">{{ item.name }}</a></h5>
                  <p class="text-muted mb-1">{{ item.brand }}</p>
                  {% if item.price %}
                    <p class="fw-bold text-primary">₹{{ item.price }}</p>
                  {% endif %}
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    {% endif %}

    <!-- Newsletter -->
    <div class="container-fluid bg-primary newsletter p-0 mt-5">
        <div class="container p-0">
            <div class="row g-0 align-items-center">
                <div class="col-md-5 ps-lg-0">
                    <img class="img-fluid w-100" src="{% static 'web/img/newsletter.jpg' %}" alt="">
                </div>
                <div class="col-md-7 py-5">
                    <div class="p-5">
                        <h1 class="mb-4 text-white">Subscribe to Our Newsletter</h1>
                        <div class="position-relative w-100 mb-3">
                            <input class="form-control border-0 w-100 ps-4 pe-5" type="text" placeholder="Enter Your Email" style="height: 60px;">
                            <button type="button" class="btn position-absolute top-0 end-0 mt-2 me-2">
                                <i class="fa fa-paper-plane text-primary fs-4"></i>
                            </button>
                        </div>
                        <p class="text-white-50 mb-0">Get updates on new arrivals and special offers.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="container-fluid bg-dark text-white-50 footer pt-5">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.1s">
                    <a href="index.html" class="d-inline-block mb-3">
                        <h1 class="text-white">EduTrade</h1>
                    </a>
                    <p class="mb-0">Tempor erat elitr rebum at clita. Diam dolor diam ipsum et tempor sit. Aliqu diam
                        amet diam et eos labore. Clita erat ipsum et lorem et sit, sed stet no labore lorem sit. Sanctus
                        clita duo justo et tempor</p>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h5 class="text-white mb-4">Get In Touch</h5>
                    <p><i class="fa fa-map-marker-alt me-3"></i>123 Book Street, Kochi, Kerala</p>
                    <p><i class="fa fa-phone-alt me-3"></i>+91 98765 43210</p>
                    <p><i class="fa fa-envelope me-3"></i>info@bookshop.com</p>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h5 class="text-white mb-4">Quick Links</h5>
                    <a class="btn btn-link" href="{% url 'about' %}">About Us</a>
                    <a class="btn btn-link" href="{% url 'contact' %}">Contact Us</a>
                    <a class="btn btn-link" href="#!">Privacy Policy</a>
                    <a class="btn btn-link" href="#!">Terms & Conditions</a>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h5 class="text-white mb-4">Categories</h5>
                    {% if category %}
                        {% for i in category %}
                            <a class="btn btn-link" href="{% url 'category' i.name %}">{{ i.name }}</a>
                        {% endfor %}
                    {% else %}
                        <span class="btn btn-link disabled">No Records</span>
                    {% endif %}
                </div>
                <div class="col-lg-3 col-md-6">
                    <h5 class="text-white mb-4">Follow Us</h5>
                    <div class="d-flex pt-2">
                        <a class="btn btn-outline-primary btn-square me-2" href="#"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-outline-primary btn-square me-2" href="#"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-outline-primary btn-square me-2" href="#"><i class="fab fa-instagram"></i></a>
                        <a class="btn btn-outline-primary btn-square me-2" href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'web/lib/wow/wow.min.js' %}"></script>
    <script src="{% static 'web/lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'web/lib/waypoints/waypoints.min.js' %}"></script>
    <script src="{% static 'web/lib/owlcarousel/owl.carousel.min.js' %}"></script>
    <script src="{% static 'web/js/main.js' %}"></script>
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
</body>
</html>
